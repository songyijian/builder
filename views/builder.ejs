<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
	<meta name="viewport" content="width=750,target-densitydpi=device-dpi,user-scalable=no">
    <title>f2e 前端构建工具</title>
	<link rel="stylesheet" href="http://localhost:8000/staticfile/css.css">
</head>
<body>
<form class="panel">
	<div>
		<h4>项目仓库：</h4>
		<% for(var i=0; i<ItemType.length; i++){%>
			<p class="btn_boxs">
				<em><%= ItemType[i].name %>：</em>
				<% for(var j=0; j<ItemType[i].list.length; j++){%>
					<input type="button" name="<%= ItemType[i].list[j].path %>" data-ckl="<%= ItemType[i].id %>" id="" value="<%= ItemType[i].list[j].name %>" />
				<% }%>
			</p><br/>
		<% }%>
	</div>
    <div>
        <h4>创建位置：</h4>
		<i>注意：Windows ? "\" : "/" </i>
        <input type="text" name="" id="path" value="" />
    </div>
    <div>
        <h4>模版：</h4>
        <p class="btn_box">
			<%for(var i=0; i<template.length; i++){%>
				<input type="button" name="<%= template[i].mb_id %>" id="" value="<%= template[i].name %>" />
			<%}%>
        </p>
    </div>
	<input type="button" name="" id="builder" value="创建项目" /> <span  id="gourl"></span> 
</form>

<div class="panel rk">
	<h4>项目仓库入口：</h4>
	<% for(var i=0; i<ItemType.length; i++){%>
		<div>
		<em><%= ItemType[i].name %>：</em>
			<% for(var j=0; j<ItemType[i].list.length; j++){%>
			<a class="" href="http://localhost:8000/<%= ItemType[i].name %>/<%= ItemType[i].list[j].name %>"><%= ItemType[i].list[j].name %>: <%= ItemType[i].list[j].path %></a>
			<% }%>
		</div>
	<% }%>
</div>
<script src="http://localhost:8000/staticfile/Ajax.js"></script>
<script>
!function(){
	function $(s){return document.querySelector(s)}
	function _$(s){return document.querySelectorAll(s)}
	let mbbtnBox = _$(".btn_box");
	let pathbtnBoxs = _$(".btn_boxs");
	let path = $("#path");

	mbbtnBox.forEach((items,index)=>{
		items.addEventListener('click', (ev)=>{
			let _this = ev.target;
			if(_this.nodeName === "INPUT"){
				if($("#mb_yes"))$("#mb_yes").id = "";
				_this.id = "mb_yes";
			}
		})
	})

	pathbtnBoxs.forEach((items,index)=>{
		items.addEventListener('click', (ev)=>{
			let _this = ev.target;
			if(_this.nodeName === "INPUT"){
				if($("#type_yes"))$("#type_yes").id = "";
				_this.id = "type_yes";
			}
		})
	})
	

	$("#builder").onclick = ()=>{
		let jData={}
		if(!$("#type_yes")){
			alert("滚粗！再瞅瞅项目类型");
			return;
		}
		jData.type= $("#type_yes").name;
		jData.ckl= $("#type_yes").dataset.ckl;
		if(!path.value){
			alert("滚粗！你这是要创建空气吗？输入项目名称");
			return;
		}
		jData.path = path.value;
		if(!$("#mb_yes")){
			alert("滚粗！关于模版...");
			return;
		}
		jData.mold = $("#mb_yes").name;
		new Ajax({
			"url":"./builder",
			"data":jData,
			"success":function(e){
				console.log(e)
				if(e.state>0){
					$("#gourl").innerHTML =`yes: <a href="${e.info}">${e.info} </a>`
				}else{ 
					$("#gourl").innerHTML =`no: ${e.info}` 
				}
			}
		})
	}
}()
</script>
</body>
</html>